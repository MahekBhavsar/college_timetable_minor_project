<div class="container-fluid p-4 bg-light min-vh-100">
  
  <div class="card border-0 shadow-sm mb-5">
    <div class="card-header bg-primary text-white py-3">
      <h5 class="mb-0 fw-bold">
        @if (editingId()) { Update Faculty Member } @else { Add New Faculty Member }
      </h5>
    </div>
    <div class="card-body p-4 bg-white">
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label small fw-bold">NAME</label>
          <input type="text" class="form-control" [(ngModel)]="newStaff.name" placeholder="Prof. Name">
        </div>
        
        <div class="col-md-4">
          <label class="form-label small fw-bold">EMAIL</label>
          <input type="email" class="form-control" [(ngModel)]="newStaff.email" placeholder="email@college.edu">
        </div>

        <div class="col-md-4">
          <label class="form-label small fw-bold">SUBJECTS (Comma separated)</label>
          <input type="text" class="form-control" [(ngModel)]="subjectInput" placeholder="Java, DBMS, C++">
        </div>

        <div class="col-12 mt-3">
          <label class="form-label small fw-bold d-block">BCA SEMESTERS</label>
          <div class="d-flex flex-wrap gap-2 pt-1">
            @for (s of [1,2,3,4,5,6]; track s) {
              <input type="checkbox" class="btn-check" [id]="'sem'+s" 
                     [checked]="newStaff.semesters.includes(s)" (change)="toggleSem(s)">
              <label class="btn btn-outline-dark btn-sm px-3 rounded-pill" [for]="'sem'+s">Sem {{s}}</label>
            }
          </div>
        </div>

        <div class="col-12 text-end mt-4 border-top pt-3">
          <button type="button" class="btn btn-secondary me-2 px-4" (click)="cancelAction()">Clear</button>
          <button type="button" class="btn btn-primary px-5 fw-bold shadow-sm" (click)="saveStaff()">
            @if (editingId()) { Update } @else { Save }
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="card border-0 shadow-sm rounded-3">
    <div class="card-header bg-white py-3 border-bottom">
      <h5 class="m-0 fw-bold">Staff Directory</h5>
    </div>
    <div class="table-responsive">
      <table class="table align-middle mb-0">
        <thead class="bg-light">
          <tr class="text-muted small fw-bold text-uppercase">
            <th class="ps-4">Faculty</th>
            <th>Semesters</th>
            <th>Subjects</th>
            <th class="text-end pe-4">Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (staff of staffList(); track staff.id) {
            <tr>
              <td class="ps-4">
                <div class="fw-bold text-dark">{{ staff.name }}</div>
                <small class="text-muted">{{ staff.email }}</small>
              </td>
              <td>
                @for (sem of staff.semesters; track sem) {
                  <span class="badge bg-secondary-subtle text-dark border me-1">S{{sem}}</span>
                }
              </td>
              <td>
                @for (sub of staff.subjects; track sub) {
                  <span class="badge bg-info-subtle text-primary border me-1">{{sub}}</span>
                }
              </td>
              <td class="text-end pe-4">
                <button class="btn btn-sm btn-outline-primary me-2 border-0" (click)="editStaff(staff)">
                  Edit
                </button>
                <button class="btn btn-sm btn-outline-danger border-0" (click)="deleteStaff(staff.id)">
                  Delete
                </button>
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="4" class="text-center py-5 text-muted">No faculty records found.</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>